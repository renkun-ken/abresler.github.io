<!doctype HTML>
<title>Comparing Federer vs Monfils</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-touch-fullscreen" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta charset = 'utf-8'>
<html>
  <head>
    <link rel='stylesheet' href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
    <link rel='stylesheet' href='http://aragorn.org/scripts/nv.d3.css'>
    <link rel='stylesheet' href='http://aragorn.org/scripts/rNVD3.css'>
    
    <script src='http://aragorn.org/scripts/jquery-1.8.2.min.js' type='text/javascript'></script>
    <script src='http://aragorn.org/scripts/d3.v3.min.js' type='text/javascript'></script>
    <script src='http://aragorn.org/scripts/nv.d3.min-new.js' type='text/javascript'></script>
    
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.6/angular.min.js"></script>
     <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
    
    <style>
    .rChart {
      display: block
      margin: auto auto;
      width: 610px;
      height: 400px;
    }
    .bs-docs-example:after {
      content: "";
      background: transparent;
      border: none;
    }
    </style>
        </style>
        <script type='text/javascript'>
var _qevents = _qevents || [];
               
               (function() {
               var elem = document.createElement('script');
               elem.src = (document.location.protocol == 'https:' ? 'https://secure' : 'http://edge') + '.quantserve.com/quant.js';
               elem.async = true;
               elem.type = 'text/javascript';
               var scpt = document.getElementsByTagName('script')[0];
               scpt.parentNode.insertBefore(elem, scpt);
               })();
               
               _qevents.push({
               qacct:'p-S9mx3XF_GwU-x'
               });
               </script>
               
               <script>
               var _gaq=[['_setAccount','UA-34398972-1'],['_trackPageview']];
               (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
               g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
               s.parentNode.insertBefore(g,s)}(document,'script'));
               </script>
              <script type="text/javascript">
var _qevents = _qevents || [];

(function() {
var elem = document.createElement('script');
elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";
elem.async = true;
elem.type = "text/javascript";
var scpt = document.getElementsByTagName('script')[0];
scpt.parentNode.insertBefore(elem, scpt);
})();

_qevents.push({
qacct:"p-S9mx3XF_GwU-x"
});
</script>
<style type="text/css" media="all">@import url("http://www.si.com/sites/all/themes/custom/si_base/styles/global.css?nawt0v");
@import url("http://www.si.com/sites/all/themes/custom/si_base/styles/ui.css?nawt0v");
@import url("http://www.si.com/sites/all/themes/custom/si_desktop/styles/bookmark-overlay.css?nawt0v");</style> 
    
  </head>
  <body >
  <center>
       <center>
       <div class='orange' style="padding-top:10px;padding-bottom:5px; text-align:middle; font-size:24px; width: 400px; display:table-cell;height:40px;vertical-align:middle;letter-spacing: 0.25px"><strong>Comparing the 2014 U.S. Open Performances of Roger Federer and Gael Monfils</strong></div>
    </div></center>
    <center><a href = "http://www.ibm.com/sports" target = "_blank"><img src="http://www.aragorn.org/logos/ibm_630_100v3.jpg" alt="" width = "450" height="71" style="padding: 2.5px"></a></center>
  
  <body ng-app>
      
    <div class='container' ng-controller="DemoCtrl">
  <div class='row'>
    <div class='col-md-2'>
      <form class='well'>
        <label><b>Select Variable:</b></label>
    		<select class='form-control' ng-model="opts.y" 
          ng-options="ctl for ctl in controls.y.values">   
    		</select>
              </form>
    </div>
    <div class='col-md-7'>
      <div class="bs-docs-example">
        <div id='chart476e76ed9ea7' class='rChart '>
          <svg></svg>
        </div>
        
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
function DemoCtrl($scope){
  $scope.opts = {
 "dom": "chart476e76ed9ea7",
"width":    610,
"height":    400,
"x": "Player",
"y": "Aces",
"group": "Player",
"type": "multiBarChart",
"id": "chart476e76ed9ea7" 
}
  $scope.data = [
 {
 "Player": "Gael Monfils",
"Aces": 41,
"Double Faults": 27,
"Unreturned Serve Pct": 36,
"First Serve Pct": 57,
"First Serve Point Pct": 78,
"Second Serve Point Pct": 55,
"Broken": 5,
"Break Points Faced": 22,
"Games Served": 59,
"Service Games Held": 92,
"Fastest Serve": 137,
"Returns In Play Pct": 79,
"First Return Points Won Pct": 39,
"Second Return Points Won Pct": 53,
"Breaks Of Serve": 21,
"Break Points": 42,
"Break Points Lost": 21,
"Break Point Conversion Pct": 50,
"Return Games Played": 60,
"Return Game Win Pct": 35,
"Forehand Winners": 63,
"Unforced Errors": 57,
"Backhand Winners": 31,
"Backhand Unforced Errors": 43,
"Winners": 153,
"Net Points": 47,
"Net Points Won": 31,
"Net Point Win Pct": 66,
"Baseline Point Win Pct": 55,
"Games Lost": 43,
"Sets Lost": 0,
"Minutes On Court": 507 
},
{
 "Player": "Roger Federer",
"Aces": 40,
"Double Faults": 10,
"Unreturned Serve Pct": 39,
"First Serve Pct": 62,
"First Serve Point Pct": 81,
"Second Serve Point Pct": 53,
"Broken": 6,
"Break Points Faced": 20,
"Games Served": 59,
"Service Games Held": 90,
"Fastest Serve": 130,
"Returns In Play Pct": 75,
"First Return Points Won Pct": 42,
"Second Return Points Won Pct": 53,
"Breaks Of Serve": 23,
"Break Points": 58,
"Break Points Lost": 35,
"Break Point Conversion Pct": 40,
"Return Games Played": 60,
"Return Game Win Pct": 38,
"Forehand Winners": 49,
"Unforced Errors": 46,
"Backhand Winners": 24,
"Backhand Unforced Errors": 35,
"Winners": 170,
"Net Points": 160,
"Net Points Won": 107,
"Net Point Win Pct": 57,
"Baseline Point Win Pct": 51,
"Games Lost": 43,
"Sets Lost": 1,
"Minutes On Court": 469 
} 
]
  $scope.controls = {
 "y": {
 "name": "y",
"value": "Aces",
"values": [ "Aces", "Double Faults", "Winners", "Net Points", "Net Points Won", "Net Point Win Pct", "Baseline Point Win Pct", "Games Lost", "Sets Lost", "Minutes On Court", "Unreturned Serve Pct", "First Serve Pct", "First Serve Point Pct", "Second Serve Point Pct", "Broken", "Break Points Faced", "Games Served", "Service Games Held", "Fastest Serve", "Returns In Play Pct", "First Return Points Won Pct", "Second Return Points Won Pct", "Breaks Of Serve", "Break Points", "Break Points Lost", "Break Point Conversion Pct", "Return Games Played", "Return Game Win Pct", "Forehand Winners", "Unforced Errors", "Backhand Winners", "Backhand Unforced Errors" ],
"label": "Select  y :" 
} 
} 
  $scope.filters = []
  
  $scope.drawChart = function(){
    drawChart($scope.opts, $scope.data)  
  }
  
  $scope.$watch('selected', function(){
    var keys = _.pluck($scope.selected, "variable")
    var values = _.pluck($scope.selected, "value")
    $scope.opts.selected = _.zipObject(keys, values)
  }) 
  
  $scope.$watch('opts',function(){
    $scope.drawChart()
	}, true)
}  

function drawChart(opts, data){ 
  if (Object.keys(opts.selected).length > 0){
    data = _.filter(data, opts.selected)
  }
  
  if(!(opts.type==="pieChart" || opts.type==="sparklinePlus" || opts.type==="bulletChart")) {
    var data = d3.nest()
      .key(function(d){
        //return opts.group === undefined ? 'main' : d[opts.group]
        //instead of main would think a better default is opts.x
       return opts.group === undefined ? opts.y : d[opts.group];
      }).entries(data);
  }
      
  if (opts.disabled != undefined){
    data.map(function(d, i){
      d.disabled = opts.disabled[i]
    })
  }
	
	nv.addGraph(function() {
		var chart = nv.models[opts.type]()
			.x(function(d) { return d[opts.x] })
			.y(function(d) { return d[opts.y] })
			.width(opts.width)
			.height(opts.height)
		
	chart
  .showControls(false)
  .transitionDuration(   200)
  .staggerLabels(false)
  .color([ "#002593", "#ff0000" ])
  .margin({
 "left":     50,
"top":     50,
"right":     20,
"bottom":     20 
})
  .tooltipContent( function(key, x, y, e ){ 
  var d = e.series.values[e.pointIndex];
  return '<b>Player:</b> ' + d.Player + '<br><b>' + opts.y + ': </b>' + y
} )
          
	chart.xAxis
  .orient("bottom")

	
	
	 chart.yAxis
 .tickFormat(function(d) {return  d3.format('.1f')(d)})
 .width(    52)
 .axisLabel( opts.y )

	d3.select("#" + opts.id + ' svg')
  // .empty()
		.datum(data)
		.transition().duration(200)
		.call(chart);
	
	 nv.utils.windowResize(chart.update);
	 return chart;
  });
};
</script>
    
<center>
<div style="display:table;width:220px;height:10px;font-size:12px" class='gray'>
<center><strong>Distributed by</strong><a href="http://aragorn.org/" target="_blank"><img src="http://www.aragorn.org/aragorn_logo.png" height="26" width="137" alt="aragorn"></a></b></center></div>
</center>
</body>
</html>